{"config":{"lang":["en"],"separator":"[\\s\\u200b\\u3000\\-\u3001\u3002\uff0c\uff0e\uff1f\uff01\uff1b]+","pipeline":["stemmer"]},"docs":[{"location":"","title":"FastAPI \u6837\u4f8b\u5de5\u7a0b","text":"<p>\u5728lambda\u91cc\u8fd0\u884cFastAPI\uff0c\u901a\u8fc7aws API Gateway\u5bf9\u5916\u63d0\u4f9b\u670d\u52a1\u3002</p>"},{"location":"api/","title":"API","text":""},{"location":"dev/","title":"API Introduction","text":""},{"location":"dev/#run-locally","title":"Run locally","text":"<p>Python version requirement 3.11</p>"},{"location":"dev/#1-installation-package","title":"1. Installation package","text":"<pre><code>pip install -r requirements.txt\npip install uvicorn\n</code></pre>"},{"location":"dev/#2-starting-web-services-locally","title":"2. Starting web services locally","text":"<pre><code>uvicorn main:app --reload\n</code></pre>"},{"location":"dev/#3-view-api","title":"3. View API","text":"<p>http://127.0.0.1:8000/docs</p>"},{"location":"dev/#file-naming","title":"File Naming","text":"File Name Role main.py controller service.py service schemas.py VO crud.py DAO db/models-xxx.py DO"},{"location":"dev/#add-a-module","title":"Add a module","text":""},{"location":"dev/#1-generate-ddl-sql","title":"1. Generate DDL sql","text":"<p>Recommend using DataGrip, Place constraints use Inside table mode</p>"},{"location":"dev/#2-install-omm","title":"2. Install omm","text":"<pre><code>pip install omymodels\n</code></pre>"},{"location":"dev/#3-generate-models","title":"3. Generate models","text":"<pre><code>omm db.sql -m sqlalchemy -t models_xxx.py\n</code></pre>"},{"location":"dev/#4-generate-schemas","title":"4. Generate schemas","text":"<pre><code>omm db.sql -m pydantic --defaults-off -t schemas.py\n</code></pre>"},{"location":"dev/#5-coding","title":"5. Coding","text":"<p>Develop controllers, services, dao normally, and modify schemas</p>"},{"location":"dev/#6-export-api","title":"6. Export API","text":"<p>Add the router for the module to main.py in the root directory</p> <pre><code>from pet.main import router as pet_router\n\napp.include_router(pet_router)\n</code></pre>"},{"location":"dev/#7-manual-packaging-testing","title":"7. Manual packaging testing","text":"<p><pre><code>zip -r api.zip * -x \"venv/*\" \"lambda/*_test.py\"\n</code></pre> Then put this zip file into lambda and run it.</p>"},{"location":"dev/#pytest","title":"PyTest","text":""},{"location":"dev/#1-installation-package_1","title":"1. Installation package","text":"<pre><code>pip install -r pytest/requirements.txt\n</code></pre>"},{"location":"dev/#2-test","title":"2. Test","text":"<pre><code>python -m pytest pytest -s\n</code></pre>"}]}